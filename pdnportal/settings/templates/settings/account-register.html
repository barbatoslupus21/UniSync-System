{% extends 'main.html' %}
{% load static %}

{% block title %}UniSync - User Account{% endblock %}

{% block extra_css %}

<link rel="stylesheet" href="{% static 'css/account/account-registration.css' %}">
{% endblock %}

{% block content %}
<main class="main-content">
    <!-- Header with page title and action button -->
    <div class="UM-header">
        <div class="UM-title-section">
            <h1 class="UM-page-title">User Management</h1>
            <p class="UM-subtitle">Add, edit, and manage user accounts and permissions</p>
        </div>
        <button id="add-user-btn" class="UM-button UM-primary-button">
            <i class="fas fa-plus"></i> Add New User
        </button>
    </div>

    <!-- Stats cards -->
    <div class="UM-stats-container">
        <div class="UM-stats-card UM-total">
            <div class="UM-stats-icon">
                <i class="fas fa-users"></i>
            </div>
            <div class="UM-stats-content">
                <h3>Total Users</h3>
                <h2 class="UM-stats-number">{{ users_count }}</h2>
            </div>
        </div>
        
        <div class="UM-stats-card UM-admin">
            <div class="UM-stats-icon">
                <i class="fas fa-user-shield"></i>
            </div>
            <div class="UM-stats-content">
                <h3>Admin Users</h3>
                <h2 class="UM-stats-number">{{ admin_count }}</h2>
            </div>
        </div>
        
        <div class="UM-stats-card UM-active">
            <div class="UM-stats-icon">
                <i class="fas fa-user-check"></i>
            </div>
            <div class="UM-stats-content">
                <h3>Active Users</h3>
                <h2 class="UM-stats-number">{{ active_count }}</h2>
            </div>
        </div>
        
        <div class="UM-stats-card UM-inactive">
            <div class="UM-stats-icon">
                <i class="fas fa-user-clock"></i>
            </div>
            <div class="UM-stats-content">
                <h3>Inactive Users</h3>
                <h2 class="UM-stats-number">{{ inactive_count }}</h2>
            </div>
        </div>
    </div>

    <!-- Main content grid with filters and user table -->
    <div class="UM-card UM-all-users">
        <div class="UM-card-header">
            <h2>All Users</h2>
            <div class="UM-card-actions">
                <div class="UM-search-container">
                    <input type="text" id="user-search" class="UM-search-input" placeholder="Search by name, ID or line...">
                    <button class="UM-search-button">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="UM-filter-container">
                    <select id="permission-filter" class="UM-select UM-filter-select">
                        <option value="all">All Permissions</option>
                        <option value="admin">Admin Users</option>
                        <option value="job_order">Job Order</option>
                        <option value="manhours">Manhours</option>
                        <option value="monitoring">Monitoring</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="UM-table-container">
            <table class="UM-table">
                <thead>
                    <tr>
                        <th>Avatar</th>
                        <th>ID Number</th>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Line</th>
                        <th>Username</th>
                        <th>Permissions</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td data-label="Avatar">
                            <img src="{{ user.avatar.url }}" alt="{{ user.name }}" class="UM-user-avatar">
                        </td>
                        <td data-label="ID">{{ user.id_number }}</td>
                        <td data-label="Name">{{ user.name }}</td>
                        <td data-label="Position">{{ user.position }}</td>
                        <td data-label="Line">{{ user.line.line_name }}</td>
                        <td data-label="Username">{{ user.username }}</td>
                        <td data-label="Permissions">
                            <div class="UM-permission-pills">
                                {% if user.is_admin %}
                                <span class="UM-permission-pill UM-admin-pill">Admin</span>
                                {% endif %}
                                
                                {% if user.job_order_user %}
                                <span class="UM-permission-pill UM-job-order-pill">Job Order</span>
                                {% endif %}
                                
                                {% if user.manhours_user %}
                                <span class="UM-permission-pill UM-manhours-pill">Manhours</span>
                                {% endif %}
                                
                                {% if user.monitoring_user %}
                                <span class="UM-permission-pill UM-monitoring-pill">Monitoring</span>
                                {% endif %}
                            </div>
                        </td>
                        <td data-label="Status">
                            <span class="UM-status {% if user.is_active %}UM-status-active{% else %}UM-status-inactive{% endif %}">
                                {% if user.is_active %}Active{% else %}Inactive{% endif %}
                            </span>
                        </td>
                        <td data-label="Actions">
                            <div class="UM-action-buttons">
                                <button class="UM-icon-button UM-edit-user" data-id="{{ user.id }}" title="Edit User">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="UM-icon-button UM-delete-user" data-id="{{ user.id }}" title="Delete User">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                                <form method="post" action="{% url 'toggle_status' user.id %}" class="UM-inline-form">
                                    {% csrf_token %}
                                    <button type="submit" class="UM-icon-button UM-toggle-status" title="{% if user.is_active %}Deactivate{% else %}Activate{% endif %}">
                                        <i class="fas {% if user.is_active %}fa-user-slash{% else %}fa-user-check{% endif %}"></i>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="9" class="UM-empty-table">No users found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Pagination -->
        <div class="UM-pagination">
            <div class="UM-pagination-info">
                Showing {{ users.start_index }} to {{ users.end_index }} of {{ users.paginator.count }} users
            </div>
            <div class="UM-pagination-pages">
                {% if users.has_previous %}
                <a href="?page=1" class="UM-pagination-btn">
                    <i class="fas fa-angle-double-left"></i>
                </a>
                <a href="?page={{ users.previous_page_number }}" class="UM-pagination-btn">
                    <i class="fas fa-angle-left"></i>
                </a>
                {% endif %}
                
                {% for i in users.paginator.page_range %}
                    {% if users.number == i %}
                    <span class="UM-pagination-page active">{{ i }}</span>
                    {% elif i > users.number|add:'-3' and i < users.number|add:'3' %}
                    <a href="?page={{ i }}" class="UM-pagination-page">{{ i }}</a>
                    {% endif %}
                {% endfor %}
                
                {% if users.has_next %}
                <a href="?page={{ users.next_page_number }}" class="UM-pagination-btn">
                    <i class="fas fa-angle-right"></i>
                </a>
                <a href="?page={{ users.paginator.num_pages }}" class="UM-pagination-btn">
                    <i class="fas fa-angle-double-right"></i>
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</main>

<!-- Add User Modal -->
<div class="UM-modal" id="add-user-modal">
    <div class="UM-modal-content">
        <div class="UM-modal-header">
            <h2 id="modal-title">Add New User</h2>
            <button class="UM-modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="user-form" method="post" action="{% url 'create' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" id="user-id" name="user_id" value="">
            <div class="UM-modal-body">
                <!-- Avatar Selection -->
                <div class="UM-form-section">
                    <h3>Profile Avatar</h3>
                    <div class="UM-avatar-carousel">
                        <button type="button" class="UM-avatar-nav-btn" id="avatar-prev">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div class="UM-avatar-container">
                            <div class="UM-avatar-slider">
                                <!-- Avatar images will be added dynamically via JavaScript -->
                                {% for avatar in avatars %}
                                <div class="UM-avatar-option {% if forloop.first %}active{% endif %}" data-avatar="{{ avatar.filename }}">
                                    <img src="{{ avatar.url }}" alt="Avatar {{ forloop.counter }}" class="UM-avatar-img">
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        <button type="button" class="UM-avatar-nav-btn" id="avatar-next">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <input type="hidden" id="selected-avatar" name="avatar" value="{{ avatars.0.filename }}">
                </div>
                
                <!-- Basic Information -->
                <div class="UM-form-section">
                    <h3>Basic Information</h3>
                    <div class="UM-form-grid">
                        <div class="UM-form-group">
                            <label for="id-number">ID Number</label>
                            <input type="text" id="id-number" name="id_number" class="UM-input" required>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="name">Full Name</label>
                            <input type="text" id="name" name="name" class="UM-input" required>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="position">Position</label>
                            <select id="position" name="position" class="UM-select" required>
                                <option value="">Select a position</option>
                                {% for position_value, position_label in position_choices %}
                                <option value="{{ position_value }}">{{ position_label }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="line">Line</label>
                            <select id="line" name="line" class="UM-select" required>
                                <option value="">Select a line</option>
                                {% for line in lines %}
                                <option value="{{ line.id }}">{{ line.line_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" name="username" class="UM-input" required>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="password">Password</label>
                            <div class="UM-password-field">
                                <input type="password" id="password" name="password" class="UM-input" required>
                                <button type="button" class="UM-password-toggle">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="UM-form-group UM-checkbox-wrapper">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="is-admin" name="is_admin">
                                <span class="UM-checkbox-label">Administrator</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Permissions -->
                <div class="UM-form-section">
                    <h3>Permissions</h3>
                    
                    <!-- Job Order Permissions -->
                    <div class="UM-permission-category">
                        <div class="UM-permission-header">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="job-order-user" name="job_order_user">
                                <span class="UM-checkbox-label UM-category-label">Job Order Module</span>
                            </label>
                        </div>
                        
                        <div class="UM-subpermissions" id="job-order-roles">
                            <div class="UM-radio-group">
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="requestor">
                                    <span class="UM-radio-label">Requestor</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="approver">
                                    <span class="UM-radio-label">Approver</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="checker">
                                    <span class="UM-radio-label">Checker</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="maintenance">
                                    <span class="UM-radio-label">Maintenance</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="facilitator">
                                    <span class="UM-radio-label">Facilitator</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Manhours Permissions -->
                    <div class="UM-permission-category">
                        <div class="UM-permission-header">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="manhours-user" name="manhours_user">
                                <span class="UM-checkbox-label UM-category-label">Manhours Module</span>
                            </label>
                        </div>
                        
                        <div class="UM-subpermissions" id="manhours-roles">
                            <div class="UM-radio-group">
                                <label class="UM-radio-container">
                                    <input type="radio" name="manhours_role" value="staff">
                                    <span class="UM-radio-label">Staff</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="manhours_role" value="supervisor">
                                    <span class="UM-radio-label">Supervisor</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Monitoring Permissions -->
                    <div class="UM-permission-category">
                        <div class="UM-permission-header">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="monitoring-user" name="monitoring_user">
                                <span class="UM-checkbox-label UM-category-label">Monitoring Module</span>
                            </label>
                        </div>
                        
                        <div class="UM-subpermissions" id="monitoring-roles">
                            <div class="UM-radio-group">
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="staff">
                                    <span class="UM-radio-label">Staff</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="supervisor">
                                    <span class="UM-radio-label">Supervisor</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="manager">
                                    <span class="UM-radio-label">Manager</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="qad">
                                    <span class="UM-radio-label">QAD</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="sales">
                                    <span class="UM-radio-label">Sales</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- User Approvers Section -->
                <div class="UM-form-section">
                    <h3>User Approvers</h3>
                    <div class="UM-approvers-container">
                        <div id="approvers-list">
                            <!-- Initial approver row -->
                            <div class="UM-approver-row">
                                <div class="UM-form-group">
                                    <label for="approver-module-0">Module</label>
                                    <select name="approver_module[]" id="approver-module-0" class="UM-select" required>
                                        <option value="">Select Module</option>
                                        {% for module_value, module_label in module_choices %}
                                        <option value="{{ module_value }}">{{ module_label }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                
                                <div class="UM-form-group">
                                    <label for="approver-role-0">Role</label>
                                    <select name="approver_role[]" id="approver-role-0" class="UM-select" required>
                                        <option value="">Select Role</option>
                                        {% for role_value, role_label in role_choices %}
                                        <option value="{{ role_value }}">{{ role_label }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                
                                <div class="UM-form-group approver-user-group">
                                    <label for="approver-user-0">Approver</label>
                                    <select name="approver_user[]" id="approver-user-0" class="UM-select" required>
                                        <option value="">Select Approver</option>
                                        {% for approver in potential_approvers %}
                                        <option value="{{ approver.id }}">{{ approver.name }} ({{ approver.position }})</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                
                                <div class="UM-approver-actions">
                                    <button type="button" class="UM-icon-button UM-remove-approver-btn" disabled>
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <button type="button" id="add-approver-btn" class="UM-button UM-secondary-button">
                            <i class="fas fa-plus"></i> Add Another Approver
                        </button>
                    </div>
                </div>
            </div>
            <div class="UM-modal-footer">
                <button type="button" class="UM-button UM-secondary-button" id="cancel-user">Cancel</button>
                <button type="submit" class="UM-button UM-primary-button" id="save-user">Save User</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit User Modal - Separate from Add User Modal -->
<div class="UM-modal" id="edit-user-modal">
    <div class="UM-modal-content">
        <div class="UM-modal-header">
            <h2>Edit User</h2>
            <button class="UM-modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="edit-user-form" method="post" action="" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" id="edit-user-id" name="user_id" value="">
            <div class="UM-modal-body">
                <!-- Avatar Selection -->
                <div class="UM-form-section">
                    <h3>Profile Avatar</h3>
                    <div class="UM-avatar-carousel">
                        <button type="button" class="UM-avatar-nav-btn" id="edit-avatar-prev">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div class="UM-avatar-container">
                            <div class="UM-avatar-slider" id="edit-avatar-slider">
                                <!-- Avatar images will be added dynamically via JavaScript -->
                                {% for avatar in avatars %}
                                <div class="UM-avatar-option {% if forloop.first %}active{% endif %}" data-avatar="{{ avatar.filename }}">
                                    <img src="{{ avatar.url }}" alt="Avatar {{ forloop.counter }}" class="UM-avatar-img">
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        <button type="button" class="UM-avatar-nav-btn" id="edit-avatar-next">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <input type="hidden" id="edit-selected-avatar" name="avatar" value="{{ avatars.0.filename }}">
                </div>
                
                <!-- Basic Information -->
                <div class="UM-form-section">
                    <h3>Basic Information</h3>
                    <div class="UM-form-grid">
                        <div class="UM-form-group">
                            <label for="edit-id-number">ID Number</label>
                            <input type="text" id="edit-id-number" name="id_number" class="UM-input" required>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="edit-name">Full Name</label>
                            <input type="text" id="edit-name" name="name" class="UM-input" required>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="edit-position">Position</label>
                            <select id="edit-position" name="position" class="UM-select" required>
                                <option value="">Select a position</option>
                                {% for position_value, position_label in position_choices %}
                                <option value="{{ position_value }}">{{ position_label }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="edit-line">Line</label>
                            <select id="edit-line" name="line" class="UM-select" required>
                                <option value="">Select a line</option>
                                {% for line in lines %}
                                <option value="{{ line.id }}">{{ line.line_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="edit-username">Username</label>
                            <input type="text" id="edit-username" name="username" class="UM-input" required>
                        </div>
                        
                        <div class="UM-form-group">
                            <label for="edit-password">Password (leave blank to keep current)</label>
                            <div class="UM-password-field">
                                <input type="password" id="edit-password" name="password" class="UM-input">
                                <button type="button" class="UM-password-toggle" id="edit-password-toggle">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="UM-form-group UM-checkbox-wrapper">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="edit-is-admin" name="is_admin">
                                <span class="UM-checkbox-label">Administrator</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Permissions -->
                <div class="UM-form-section">
                    <h3>Permissions</h3>
                    
                    <!-- Job Order Permissions -->
                    <div class="UM-permission-category">
                        <div class="UM-permission-header">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="edit-job-order-user" name="job_order_user">
                                <span class="UM-checkbox-label UM-category-label">Job Order Module</span>
                            </label>
                        </div>
                        
                        <div class="UM-subpermissions" id="edit-job-order-roles">
                            <div class="UM-radio-group">
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="requestor">
                                    <span class="UM-radio-label">Requestor</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="approver">
                                    <span class="UM-radio-label">Approver</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="checker">
                                    <span class="UM-radio-label">Checker</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="maintenance">
                                    <span class="UM-radio-label">Maintenance</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="job_order_role" value="facilitator">
                                    <span class="UM-radio-label">Facilitator</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Manhours Permissions -->
                    <div class="UM-permission-category">
                        <div class="UM-permission-header">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="edit-manhours-user" name="manhours_user">
                                <span class="UM-checkbox-label UM-category-label">Manhours Module</span>
                            </label>
                        </div>
                        
                        <div class="UM-subpermissions" id="edit-manhours-roles">
                            <div class="UM-radio-group">
                                <label class="UM-radio-container">
                                    <input type="radio" name="manhours_role" value="staff">
                                    <span class="UM-radio-label">Staff</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="manhours_role" value="supervisor">
                                    <span class="UM-radio-label">Supervisor</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Monitoring Permissions -->
                    <div class="UM-permission-category">
                        <div class="UM-permission-header">
                            <label class="UM-checkbox-container">
                                <input type="checkbox" id="edit-monitoring-user" name="monitoring_user">
                                <span class="UM-checkbox-label UM-category-label">Monitoring Module</span>
                            </label>
                        </div>
                        
                        <div class="UM-subpermissions" id="edit-monitoring-roles">
                            <div class="UM-radio-group">
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="staff">
                                    <span class="UM-radio-label">Staff</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="supervisor">
                                    <span class="UM-radio-label">Supervisor</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="manager">
                                    <span class="UM-radio-label">Manager</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="qad">
                                    <span class="UM-radio-label">QAD</span>
                                </label>
                                
                                <label class="UM-radio-container">
                                    <input type="radio" name="monitoring_role" value="sales">
                                    <span class="UM-radio-label">Sales</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- User Approvers Section -->
                <div class="UM-form-section">
                    <h3>User Approvers</h3>
                    <div class="UM-approvers-container">
                        <div id="edit-approvers-list">
                            <!-- Approver rows will be added dynamically -->
                        </div>
                        
                        <button type="button" id="edit-add-approver-btn" class="UM-button UM-secondary-button">
                            <i class="fas fa-plus"></i> Add Another Approver
                        </button>
                    </div>
                </div>
            </div>
            <div class="UM-modal-footer">
                <button type="button" class="UM-button UM-secondary-button" id="edit-cancel-user">Cancel</button>
                <button type="submit" class="UM-button UM-primary-button" id="edit-save-user">Save Changes</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="UM-modal UM-confirmation-modal" id="delete-confirm-modal">
    <div class="UM-modal-content">
        <div class="UM-modal-header">
            <h2>Confirm Deletion</h2>
            <button class="UM-modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="UM-modal-body">
            <div class="UM-confirmation-content">
                <i class="fas fa-exclamation-triangle UM-confirmation-icon danger"></i>
                <p class="UM-confirmation-message">Are you sure you want to delete this user?</p>
                <p class="UM-confirmation-submessage">This action cannot be undone. All data associated with this user will be permanently deleted.</p>
            </div>
        </div>
        <form id="delete-user-form" method="post" action="">
            {% csrf_token %}
            <div class="UM-modal-footer">
                <button type="button" class="UM-button UM-secondary-button" id="cancel-delete">Cancel</button>
                <button type="submit" class="UM-button UM-danger-button" id="confirm-delete">Delete User</button>
            </div>
        </form>
    </div>
</div>

<!-- Toast Container -->
<div class="toast-container" id="toast-container"></div>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/account/account-registration.js' %}"></script>
{% endblock %}